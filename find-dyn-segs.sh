#!/bin/bash

declare -a libs_t=("../kodi-switch-build/libkodi.a")

declare -a libs=(
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libpthreads.a" 
"/opt/devkitpro/portlibs/switch/lib/libass.a" 
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libcdio.a" 
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libiso9660.a" 
"/programming/kodi-switch-build/build/cpluff/lib/libcpluff.a" 
"/opt/devkitpro/portlibs/switch/lib/libexpat.a" 
"/programming/kodi-switch-build/build/lib/libcrossguid.a" 
"/opt/devkitpro/portlibs/switch/lib/libcurl.a" 
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libavcodec.a" 
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libavfilter.a" 
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libavformat.a" 
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libavutil.a" 
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libswscale.a" 
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libswresample.a" 
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libpostproc.a" 
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libfribidi.a" 
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libfreetype.a" 
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libbz2.a" 
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libz.a" 
"/opt/devkitpro/devkitA64/aarch64-none-elf/lib/libm.a" 
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libfmt.a" 
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libfstrcmp.a" 
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libiconv.a" 
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libdvdnav.a" 
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/liblzo2.a" 
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libssl.a" 
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libcrypto.a" 
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libpcrecpp.a" 
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libpcre.a" 
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libsqlite3.a" 
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libtag.a" 
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libtinyxml.a" 
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libglad.a" 
"/opt/devkitpro/portlibs/switch/lib/libEGL.a" 
"/opt/devkitpro/portlibs/switch/lib/libglapi.a" 
"/opt/devkitpro/portlibs/switch/lib/libdrm_nouveau.a" 
"/opt/devkitpro/libnx/lib/libnx.a" 
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libz.a"
"../kodi-switch-build/build/rendering/gl/rendering_gl.a"
"../kodi-switch-build/build/platform/switch/storage/platform_switch_storage.a"
"../kodi-switch-build/build/platform/switch/network/platform_switch_network.a"
"../kodi-switch-build/build/platform/posix/utils/platform_posix_utils.a"
"../kodi-switch-build/build/platform/posix/filesystem/platform_posix_filesystem.a"
"../kodi-switch-build/build/platform/posix/platform_posix.a"
"../kodi-switch-build/build/platform/linux/linuxsupport.a"
"../kodi-switch-build/build/windowing/switch/windowing_Switch.a"
"../kodi-switch-build/build/cores/VideoPlayer/videorenderers/shaders/videoshaders.a"
"../kodi-switch-build/build/cores/VideoPlayer/videorenderers/videorenderers.a"
"../kodi-switch-build/build/cores/VideoPlayer/process/process.a"
"../kodi-switch-build/build/cores/VideoPlayer/subtitles/dvdsubtitles.a"
"../kodi-switch-build/build/cores/VideoPlayer/inputstreams/dvdinputstreams.a"
"../kodi-switch-build/build/cores/VideoPlayer/demuxers/dvddemuxers.a"
"../kodi-switch-build/build/cores/VideoPlayer/codecs/video/dvdvideocodecs.a"
"../kodi-switch-build/build/cores/VideoPlayer/codecs/overlay/dvdoverlaycodecs.a"
"../kodi-switch-build/build/cores/VideoPlayer/codecs/audio/dvdaudiocodecs.a"
"../kodi-switch-build/build/cores/VideoPlayer/codecs/dvdcodecs.a"
"../kodi-switch-build/build/cores/VideoPlayer/VideoPlayer.a"
"../kodi-switch-build/build/video/windows/video_windows.a"
"../kodi-switch-build/build/video/tags/video_tags.a"
"../kodi-switch-build/build/video/jobs/video_jobs.a"
"../kodi-switch-build/build/video/dialogs/video_dialogs.a"
"../kodi-switch-build/build/video/video.a"
"../kodi-switch-build/build/windows/windows.a"
"../kodi-switch-build/build/windowing/windowing.a"
"../kodi-switch-build/build/weather/weather.a"
"../kodi-switch-build/build/view/view.a"
"../kodi-switch-build/build/utils/utils.a"
"../kodi-switch-build/build/threads/threads.a"
"../kodi-switch-build/build/storage/storage.a"
"../kodi-switch-build/build/rendering/rendering.a"
"../kodi-switch-build/build/programs/programs.a"
"../kodi-switch-build/build/powermanagement/powermanagement.a"
"../kodi-switch-build/build/playlists/playlists.a"
"../kodi-switch-build/build/platform/platform_common.a"
"../kodi-switch-build/build/pictures/pictures.a"
"../kodi-switch-build/build/messagingHelpers/messagingHelpers.a"
"../kodi-switch-build/build/messaging/messaging.a"
"../kodi-switch-build/build/media/media.a"
"../kodi-switch-build/build/listproviders/listproviders.a"
"../kodi-switch-build/build/input/mouse/generic/input_mouse_generic.a"
"../kodi-switch-build/build/input/mouse/input_mouse.a"
"../kodi-switch-build/build/input/keyboard/generic/input_keyboard_generic.a"
"../kodi-switch-build/build/input/keyboard/input_keyboard.a"
"../kodi-switch-build/build/input/joysticks/keymaps/input_joystick_keymaps.a"
"../kodi-switch-build/build/input/joysticks/generic/input_joystick_generic.a"
"../kodi-switch-build/build/input/joysticks/dialogs/input_joystick_dialogs.a"
"../kodi-switch-build/build/input/joysticks/input_joystick.a"
"../kodi-switch-build/build/input/actions/input_actions.a"
"../kodi-switch-build/build/input/input.a"
"../kodi-switch-build/build/guilib_guiinfo/guilib_guiinfo.a"
"../kodi-switch-build/build/guilib/guilib.a"
"../kodi-switch-build/build/favourites/favourites.a"
"../kodi-switch-build/build/dialogs/dialogs.a"
"../kodi-switch-build/build/dbwrappers/dbwrappers.a"
"../kodi-switch-build/build/commons/commons.a"
"../kodi-switch-build/build/addons_settings/addons_settings.a"
"../kodi-switch-build/build/addons_interfaces_gui_dialogs/addons_interfaces_gui_dialogs.a"
"../kodi-switch-build/build/addons_interfaces_gui_controls/addons_interfaces_gui_controls.a"
"../kodi-switch-build/build/addons_interfaces_gui/addons_interfaces_gui.a"
"../kodi-switch-build/build/addons_interfaces_addon/addons_interfaces_addon.a"
"../kodi-switch-build/build/addons_interfaces/addons_interfaces.a"
"../kodi-switch-build/build/addons_binary-addons/addons_binary-addons.a"
"../kodi-switch-build/build/addons/addons.a"
"../kodi-switch-build/build/xbmc/xbmc.a"
"../kodi-switch-build/build/settings/windows/settings_windows.a"
"../kodi-switch-build/build/settings/lib/settings_lib.a"
"../kodi-switch-build/build/settings/dialogs/settings_dialogs.a"
"../kodi-switch-build/build/settings/settings.a"
"../kodi-switch-build/build/cores/RetroPlayer/streams/memory/retroplayer_memory.a"
"../kodi-switch-build/build/cores/RetroPlayer/streams/retroplayer_streams.a"
"../kodi-switch-build/build/cores/RetroPlayer/savestates/retroplayer_savestates.a"
"../kodi-switch-build/build/cores/RetroPlayer/rendering/VideoRenderers/rp-videorenderers.a"
"../kodi-switch-build/build/cores/RetroPlayer/rendering/rp-rendering.a"
"../kodi-switch-build/build/cores/RetroPlayer/process/rp-process.a"
"../kodi-switch-build/build/cores/RetroPlayer/playback/retroplayer_playback.a"
"../kodi-switch-build/build/cores/RetroPlayer/guiwindows/retroplayer_guiwindows.a"
"../kodi-switch-build/build/cores/RetroPlayer/guiplayback/retroplayer_guiplayback.a"
"../kodi-switch-build/build/cores/RetroPlayer/guicontrols/retroplayer_guicontrols.a"
"../kodi-switch-build/build/cores/RetroPlayer/guibridge/retroplayer_guibridge.a"
"../kodi-switch-build/build/cores/RetroPlayer/buffers/video/rp-buffers-video.a"
"../kodi-switch-build/build/cores/RetroPlayer/buffers/rp-buffers.a"
"../kodi-switch-build/build/cores/RetroPlayer/audio/rp_audio.a"
"../kodi-switch-build/build/cores/RetroPlayer/retroplayer.a"
"../kodi-switch-build/build/pvr/windows/pvr_windows.a"
"../kodi-switch-build/build/pvr/timers/pvr_timers.a"
"../kodi-switch-build/build/pvr/recordings/pvr_recordings.a"
"../kodi-switch-build/build/pvr/epg/pvr_epg.a"
"../kodi-switch-build/build/pvr/dialogs/pvr_dialogs.a"
"../kodi-switch-build/build/pvr/channels/pvr_channels.a"
"../kodi-switch-build/build/pvr/addons/pvr_addons.a"
"../kodi-switch-build/build/pvr/pvr.a"
"../kodi-switch-build/build/profiles/windows/profiles_windows.a"
"../kodi-switch-build/build/profiles/dialogs/profiles_dialogs.a"
"../kodi-switch-build/build/profiles/profiles.a"
"../kodi-switch-build/build/peripherals/dialogs/peripherals_dialogs.a"
"../kodi-switch-build/build/peripherals/devices/peripherals_devices.a"
"../kodi-switch-build/build/peripherals/bus/virtual/peripheral_bus_virtual.a"
"../kodi-switch-build/build/peripherals/bus/peripherals_bus.a"
"../kodi-switch-build/build/peripherals/addons/peripherals_addons.a"
"../kodi-switch-build/build/peripherals/peripherals.a"
"../kodi-switch-build/build/network/websocket/network_websockets.a"
"../kodi-switch-build/build/network/network.a"
"../kodi-switch-build/build/music/windows/music_windows.a"
"../kodi-switch-build/build/music/tags/music_tags.a"
"../kodi-switch-build/build/music/jobs/music_jobs.a"
"../kodi-switch-build/build/music/infoscanner/music_infoscanner.a"
"../kodi-switch-build/build/music/dialogs/music_dialogs.a"
"../kodi-switch-build/build/music/music.a"
"../kodi-switch-build/build/interfaces/json-rpc/jsonrpc_interface.a"
"../kodi-switch-build/build/interfaces/info/info_interface.a"
"../kodi-switch-build/build/interfaces/generic/generic_interface.a"
"../kodi-switch-build/build/interfaces/builtins/interfaces_builtins.a"
"../kodi-switch-build/build/interfaces/interfaces.a"
"../kodi-switch-build/build/games/windows/gameswindows.a"
"../kodi-switch-build/build/games/tags/gametags.a"
"../kodi-switch-build/build/games/ports/gameports.a"
"../kodi-switch-build/build/games/dialogs/osd/gameosddialogs.a"
"../kodi-switch-build/build/games/dialogs/gamedialogs.a"
"../kodi-switch-build/build/games/controllers/windows/games_controller_windows.a"
"../kodi-switch-build/build/games/controllers/types/games_controller_types.a"
"../kodi-switch-build/build/games/controllers/guicontrols/games_controller_guicontrols.a"
"../kodi-switch-build/build/games/controllers/dialogs/games_controller_dialogs.a"
"../kodi-switch-build/build/games/controllers/games_controller.a"
"../kodi-switch-build/build/games/addons/streams/game_addon_streams.a"
"../kodi-switch-build/build/games/addons/input/gameinput.a"
"../kodi-switch-build/build/games/addons/gameaddons.a"
"../kodi-switch-build/build/games/games.a"
"../kodi-switch-build/build/filesystem/musicdatabase/musicdatabasedirectory.a"
"../kodi-switch-build/build/filesystem/videodatabase/videodatabasedirectory.a"
"../kodi-switch-build/build/filesystem/filesystem.a"
"../kodi-switch-build/build/kissfft/kissfft.a"
"../kodi-switch-build/build/events/windows/events_windows.a"
"../kodi-switch-build/build/events/events.a"
"../kodi-switch-build/build/drm/drm.a"
"../kodi-switch-build/build/cores/playercorefactory/playercorefactory.a"
"../kodi-switch-build/build/cores/paplayer/paplayer.a"
"../kodi-switch-build/build/cores/externalplayer/externalplayer.a"
"../kodi-switch-build/build/cores/audioengine/audioengine.a"
"../kodi-switch-build/build/cores/cores.a"
"../kodi-switch-build/libkodi.a"
"/opt/devkitpro/portlibs/switch/lib/libass.a"
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libcdio.a"
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libiso9660.a"
"../kodi-switch-build/build/cpluff/lib/libcpluff.a"
"/opt/devkitpro/portlibs/switch/lib/libexpat.a"
"../kodi-switch-build/build/lib/libcrossguid.a"
"/opt/devkitpro/portlibs/switch/lib/libcurl.a"
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libavcodec.a"
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libavfilter.a"
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libavformat.a"
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libavutil.a"
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libswscale.a"
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libswresample.a"
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libpostproc.a"
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libfmt.a"
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libfreetype.a"
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libfribidi.a"
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libfstrcmp.a"
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libiconv.a"
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libdvdnav.a"
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/liblzo2.a"
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libssl.a"
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libcrypto.a"
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libpcrecpp.a"
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libpcre.a"
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libsqlite3.a"
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libtag.a"
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libtinyxml.a"
"/home/velo/switch-tools/kodi-deps/aarch64-none-elf-release/lib/libglad.a"
"/opt/devkitpro/portlibs/switch/lib/libEGL.a"
"/opt/devkitpro/portlibs/switch/lib/libglapi.a"
"/opt/devkitpro/portlibs/switch/lib/libdrm_nouveau.a"
"/opt/devkitpro/libnx/lib/libnx.a"
"../kodi-switch-build/build/crossguid/src/crossguid-build/libcrossguid.a")

rm segs_dump.log
touch segs_dump.log

# /home/velo/programming/buildscripts-master/build/devkitA64/bin/aarch64-none-elf-g++ test.c -fPIC -Wl,--verbose -Wl,--whole-archive -Wl,--start-group "$libs" -Wl,--end-group -Wl,--no-whole-archive >> segs_dump.log

for t in "${libs[@]}"
do
    # readelf -W -a "$t" | grep TEXT_REL >> segs_dump.log
    # /home/velo/programming/buildscripts-master/build/devkitA64/bin/aarch64-none-elf-g++ test.c -fPIC -Wl,--whole-archive "$t" -Wl,--no-whole-archive >> segs_dump.log
    scanelf -a -A "$t" >> segs_dump.log
done